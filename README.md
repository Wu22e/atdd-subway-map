# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션


# 1단계 - 지하철역 인수 테스트 작성
## 기능 요구사항
- 지하철역 인수 테스트를 완성하세요.
  - 지하철역 목록 조회 인수 테스트 작성하기
  - 지하철역 삭제 인수 테스트 작성하기

## 요구사항 기반 시나리오
- 지하철역 목록 조회 인수 테스트
  - 강남역, 역삼역을 생성한다.
  - 지하철역 목록을 조회한다.
  - 강남역, 역삼역, 총 2개의 지하철 역 목록이 조회된다.
- 지하철역 삭제 인수 테스트
  - 강남역을 생성한다.
  - 생성한 강남역을 삭제한다.
  - 지하철역 목록을 조회한다.
  - 지하철역 목록에는 강남역이 없다.

## 프로그래밍 요구사항
- 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트를 리랙터링 하세요.


# 2단계 - 지하철 노선 관리
## 기능 요구사항
- 요구사항 설명 에서 제공되는 인수 조건을 기반으로 지하철 노선 관리 기능을 구현하세요.
- 인수 조건을 검증하는 인수테스트를 작성하세요.

### 기능 목록
- 지하철 노선 생성
- 지하철 노선 목록 조회
- 지하철 노선 조회
- 지하철 노선 수정
- 지하철 노선 삭제


## 프로그래밍 요구사항
- 아래의 순서로 기능을 구현하세요.
  - 인수 조건을 검증하는 인수 테스트 작성
  - 인수 테스트를 충족하는 기능 구현
- 인수 테스트의 결과가 다른 인수 테스트에 영향을 끼치지 않도록 인수 테스트를 서로 격리 시키세요.
- 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트를 리팩터링 하세요.

## 요구사항 설명
### 인수 조건
- 지하철 노선 생성
```text
When 지하철 노선을 생성하면
Then 지하철 노선 목록 조회 시 생성한 노선을 찾을 수 있다.
```

- 지하철 노선 목록 조회
```text
Given 2개의 지하철 노선을 생성하고
When 지하철 노선 목록을 조회하면
Then 지하철 노선 목록 조회 시 2개의 노선을 조회할 수 있다.
```

- 지하철 노선 조회
```text
Given 지하철 노선을 생성하고
When 생성한 지하철 노선을 조회하면
Then 생성한 지하철 노선의 정보를 응답받을 수 있다.
```

- 지하철 노선 수정
```text
Given 지하철 노선을 생성하고
When 생성한 지하철 노선을 수정하면
Then 해당 지하철 노선 정보는 수정된다
```

- 지하철 노선 삭제
```text
Given 지하철 노선을 생성하고
When 생성한 지하철 노선을 삭제하면
Then 해당 지하철 노선 정보는 삭제된다
```

> 노선 생성 시 상행종점역과 하행종점역을 등록한다. 따라서 이번 단계에서는 지하철 노선에 역을 맵핑하는 기능은 아직 없지만 노선 조회시 포함된 역 목록이 함꼐 응답된다.

## 요구사항 기반 시나리오
- 지하철 노선 생성 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역, 판교역이 포함된 신분당선을 생성한다.
  - 지하철 노선 목록을 조회한다.
  - 신분당선이 조회된다.
    - 신분당선과 함께, 상행종점역인 강남역과 하행종점역인 판교역이 함께 조회된다.
- 지하철 노선 목록 조회 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역, 판교역이 포함된 신분당선을 생성한다.
  - 정자역을 생성한다.
  - 판교역, 정자역이 포함된 수인분당선을 생성한다.
  - 지하철 노선 목록을 조회한다.
  - 신분당선과 수인분당선이 조회된다.
- 지하철 노선 조회 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역, 판교역이 포함된 신분당선을 생성한다.
  - 신분당선을 조회한다.
  - 신분당선이 조회된다.
- 지하철 노선 수정 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역, 판교역이 포함된 신분당선을 생성한다.
  - 신분당선의 이름과 노선 색을 수정한다.
  - 최초에 신분당선을 생성할 때 얻은 고유 아이디로 노선을 조회한다.
  - 변경된 노선의 이름과 색이 조회된다.
> 노선 수정 시, 노선 이름과 색만 변경할 수 있다.
- 지하철 노선 삭제 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역, 판교역이 포함된 신분당선을 생성한다.
  - 생성한 신분당선을 삭제한다.
  - 지하철 노선 목록을 조회한다.
  - 지하철 노선 목록에 신분당선이 없다.
> 노선 삭제 시, 노선만 삭제되고, 상행종점역, 하행종점역으로 등록된 역들은 삭제되지 않는다.


# 3단계 - 지하철 구간 관리
## 기능 요구사항
- 요구사항 설명에서 제공되는 요구사항을 기반으로 **지하철 구간 관리 기능**을 구현하세요.
- 요구사항을 정의한 인수 조건을 도출하세요.
- 인수 조건을 검증하는 인수 테스트를 작성하세요.
- 예외 케이스에 대한 검증도 포함하세요.

## 프로그래밍 요구사항
- 인수 테스트 주도 개발 프로세스에 맞춰서 기능을 구현하세요.
  - 요구사항 설명을 참고하여 인수 조건을 정의
  - 인수 조건을 검증하는 인수 테스트 작성
  - 인수 테스트를 충족하는 기능 구현
- 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성하세요.
  - 뼈대 코드의 인수 테스트를 참고
- 인수 테스트의 결과가 다른 인수 테스트에 영향을 끼치지 않도록 인수 테스트를 서로 격리 시키세요.
- 인수 테스트의 재사용성과 가독성, 그리고 빠른 테스트 의도 파악을 위해 인수 테스트를 리팩터링 하세요.

## 요구사항 설명
### 구간 등록 기능
- 지하철 노선에 구간을 등록하는 기능을 구현
- 새로운 구간의 상행역은 해당 노선에 등록되어있는 하행 종점역이어야 한다.
- 새로운 구간의 하행역은 해당 노선에 등록되어있는 역일 수 없다.
- 새로운 구간 등록시 위 조건에 부합하지 않는 경우 에러 처리한다.

### 구간 제거 기능
- 지하철 노선에 구간을 제거하는 기능 구현
- 지하철 노선에 등록된 역(하행 종점역)만 제거할 수 있다. 즉, 마지막 구간만 제거할 수 있다.
- 지하철 노선에 상행 종점역과 하행 종점역만 있는 경우(구간이 1개인 경우), 역을 삭제할 수 없다.
- 새로운 구간 제거시 위 조건에 부합하지 않는 경우 에러 처리한다.

### 구간 관리 기능의 예외 케이스를 고려하기
- 구간 등록과 제거 기능의 예외케이스들에 대한 시나리오를 정의
- 인수 테스트를 작성하고 이를 만족시키는 기능을 구현


## 요구사항 기반 시나리오
- 구간 등록 기능 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다.
  - 정자역을 생성한다.
  - 판교역-정자역 구간을 생성한다.
  - 판교역-정자역 구간을 신분당선에 등록한다.
  - 신분당선을 조회한다.
  - 신분당선에는 강남역-판교역-정자역이 조회된다.

- 구간 등록 기능 예외 인수 테스트 (새로운 구간의 상행역이 노선에 등록되어있는 하행 종점역이 아닌 경우)
  - 강남역, 판교역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다.
  - 정자역, 미금역을 생성한다.
  - 정자역-미금역 구간을 생성한다.
  - 정자역-미금역 구간의 상행역인 정자역은 신분당선의 하행종점역인 판교역과 일치하지 않으므로 정자역-미금역 구간은 신분당선에 등록할 수 없다.

- 구간 등록 기능 예외 인수 테스트 (새로운 구간의 하행역이 해당 노선에 등록되어 있는 경우)
  - 강남역, 판교역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다.
  - 판교역-강남역 구간을 생성한다.
  - 판교역-강남역 구간의 하행역인 강남역은 신분당선의 역들 중에 포함되어 있기 때문에 판교역-강남역 구간은 신분당선에 등록할 수 없다.

- 구간 제거 기능 인수 테스트
  - 강남역, 판교역, 정자역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다. 
  - 신분당선에 판교역-정자역 구간을 등록한다.
  - 신분당선에서 하행 종점역인 정자역을 제거한다.
  - 신분당선을 조회한다.
  - 신분당선에는 강남역-판교역이 조회된다.

- 구간 제거 기능 예외 인수 테스트
  - 강남역, 판교역, 정자역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다.
  - 신분당선에 판교역-정자역 구간을 등록한다.
  - 하행 종점역이 아닌 판교역은 삭제할 수 없다.

- 구간 제거 기능 예외 인수 테스트
  - 강남역, 판교역을 생성한다.
  - 강남역-판교역 구간이 포함된 신분당선을 생성한다.
  - 현재 신분당선은 구간이 1개이므로 하행 종점역인 판교역을 삭제할 수 없다.
